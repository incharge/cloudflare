<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>inCharge - Goal-Oriented Coaching</title>
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-0K3T6JDP53"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-0K3T6JDP53');
    </script>
    <script src="https://challenges.cloudflare.com/turnstile/v0/api.js" async defer></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            line-height: 1.6;
            color: #111;
            background: #fff;
        }

        header {
            max-width: 1200px;
            background: #ffffff;
            border-bottom: 2px solid #e0e0e0;
            margin: 0 auto;            padding: 1.5rem 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: sticky;
            top: 0;
            z-index: 100;
        }

        h2 {
            font-size: 2.5rem;
            margin-bottom: 2rem;
            font-weight: 700;
        }

        p {
            margin-bottom: 1.5rem;
        }

        .logo {
            font-size: 2rem;
            font-weight: 700;
            letter-spacing: -0.5px;
        }

        .tagline {
            font-size: 1.1rem;
            font-weight: 500;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 2rem;
        }

        section, .section {
            padding: 4rem 0;
        }
        .odd-section {
            background: #f8f8f8;
        }

        .intro-section {
            padding: 5rem 0;
        }

        .intro-content {
            max-width: 900px;
            margin: 0 auto;
        }

        .profile-image {
            width: 280px;
            height: 280px;
            background: #d0d0d0;
            float: left;
            margin: 0 2rem 1rem 0;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #666;
            font-size: 0.9rem;
            text-align: center;
        }

        .intro-text {
            font-size: 1.15rem;
            line-height: 1.8;
        }

        .form-container {
            max-width: 600px;
            margin: 0 auto;
        }

        .form-group {
            margin-bottom: 1.5rem;
        }

        label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 500;
        }

        input, textarea {
            width: 100%;
            padding: 0.75rem;
            border: 2px solid #d0d0d0;
            font-size: 1rem;
            font-family: inherit;
            border-color: #888;
            transition: border-color 0.3s;
            border-radius: 8px;
        }

        input:focus, textarea:focus {
            outline: none;
            border-color: #111;
        }

        textarea {
            resize: vertical;
            min-height: 150px;
        }

        button {
            width: 100%;
            color: #fff;
            background: #111;
            padding: 1rem 3rem;
            border: none;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: background 0.3s;
            border-radius: 8px;
        }

        button:hover {
            background: #1a1a1a;
        }

        .captcha-container {
            display: flex;
            justify-content: center;
        }

        .message {
            margin-top: 20px;
            padding: 12px;
            border-radius: 8px;
            font-size: 14px;
            display: none;
        }

        .message.success {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }

        .message.error {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }

        .message.show {
            display: block;
        }

        .spinner {
            display: inline-block;
            width: 16px;
            height: 16px;
            border: 2px solid #ffffff;
            border-radius: 50%;
            border-top-color: transparent;
            animation: spin 0.8s linear infinite;
            margin-right: 8px;
        }

        .error-message {
            color: #800;
            font-size: 14px;
            margin-top: 5px;
            display: none;
        }
        
        .error-message.show {
            display: block;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        footer {
            text-align: center;
            padding: 2rem;
        }

        .footer-content {
            max-width: 800px;
            margin: 0 auto;
        }

        .footer-content p {
            margin-bottom: 0.5rem;
        }

        @media (max-width: 768px) {
            header {
                flex-direction: column;
                gap: 1rem;
                text-align: center;
            }

            .logo {
                font-size: 1.75rem;
            }

            .tagline {
                font-size: 1rem;
            }

            .profile-image {
                display: block;
                width: 100%;
                height: auto;
                float: none;
                margin: 0 auto 1.5rem auto;
            }
        }
        @media (prefers-color-scheme: dark) {
            body {
                background: #111;
                color: #eee;
            }

            header {
                background: #111;
            }

            .odd-section {
                background: #040404;                
            }

            button {
                background: #ddd;
                color: #111;
            }

            button:hover {
                background: #d8d8d8;
            }

            input, textarea {
                color: #ccc;
                background: #181818;
            }

            input:focus, textarea:focus {
                border-color: #eee;
            }            
        }
    </style>
</head>
<body>
    <header>
        <div class="logo">inCharge</div>
        <div class="tagline">Take charge of what comes next.</div>
    </header>

    <div class="section intro-section">
        <div class="container">
            <div class="intro-content">
                <img class="profile-image" alt="Julian Price" src="img/Julian_Price_375.jpg">
                <div class="intro-text">
                    <p>You know where you want to go. You might not be entirely sure how to get there yet, or what's holding you back. That's where I come in.</p>

                    <p>I'm Julian Price.  I work with business owners and professionals across the UK who are ready to make real progress - whether that's growing your business, developing your career, or making meaningful life changes.</p>

                    <p>This isn't about me telling you what to do. You are the expert on your own life. I'm here to help you identify what you really want, work out what's already working for you, and create a practical plan to get there. We'll meet regularly to keep momentum going, adapt when things change, and tackle whatever gets in the way.</p>

                    <p>I've spent 27 years working with businesses - from corporate software projects to running my own web development company. I've seen what helps people thrive and what holds them back. Now, as a qualified coach, I bring that experience to help you achieve your goals.</p>
                </div>
            </div>
        </div>
    </div>

    <section class="book-section odd-section">
        <div class="container">
            <h2>Book a free initial consultation</h2>

            <div class="form-container">
                <p>You want something to change.  Maybe you're feeling stuck, seeking clarity, or ready to move forward with something important. Whatever brought you here, an initial consultation is a no-pressure space to explore whether my coaching is right for you.</p>
                <p>In our conversation, we'll talk about what matters most to you right now, what you're hoping to achieve, and how coaching might support you. There's no commitment - just an honest, open conversation about your goals and my approach.</p>
                <p>Many people find that simply articulating what they want in a supportive space brings unexpected clarity. At the very least, you'll leave our call with something valuable. At best, it could be the first step toward the change you've been considering.</p>
                <p><b>Choose a day &amp; time that works for you, or ask a question first via the <a href="#contact-section">contact form</a> below.</b></p>
            </div>
            <div class="form-container">
			   <!-- Cal inline embed code begins -->
			   <div style="width:100%;height:100%;overflow:scroll" id="my-cal-inline-initial-consultation"></div>
			   <script>
                    (function (C, A, L) { let p = function (a, ar) { a.q.push(ar); }; let d = C.document; C.Cal = C.Cal || function () { let cal = C.Cal; let ar = arguments; if (!cal.loaded) { cal.ns = {}; cal.q = cal.q || []; d.head.appendChild(d.createElement("script")).src = A; cal.loaded = true; } if (ar[0] === L) { const api = function () { p(api, arguments); }; const namespace = ar[1]; api.q = api.q || []; if(typeof namespace === "string"){cal.ns[namespace] = cal.ns[namespace] || api;p(cal.ns[namespace], ar);p(cal, ["initNamespace", namespace]);} else p(cal, ar); return;} p(cal, ar); }; })(window, "https://app.cal.com/embed/embed.js", "init");
                    Cal("init", "initial-consultation", {origin:"https://app.cal.com"});

                    Cal.ns["initial-consultation"]("inline", {
                        elementOrSelector:"#my-cal-inline-initial-consultation",
                        config: {"layout":"month_view"},
                        calLink: "incharge/initial-consultation",
                    });

                    Cal.ns["initial-consultation"]("ui", {"hideEventTypeDetails":true,"layout":"month_view"});
                </script>
			<!-- Cal inline embed code ends -->
            </div>
        </div>
    </section>

    <section id="contact-section">
        <div class="container">
            <h2>Ask a question</h2>
            <div class="form-container">
				<p class="subtitle">If there's no convenient time available, or you'd like to ask a question first, please fill in the form below and I'll get back to you as soon as possible.
                </p>
				<form id="contactForm">
					<div class="form-group">
						<label for="name">Name *</label>
						<input type="text" id="name" name="name" placeholder="Your name" required>
					</div>

					<div class="form-group">
						<label for="contact">Email or phone*</label>
						<input type="text" id="contact" name="contact" placeholder="Your email, or phone number for a reply by WhatsApp or SMS" required>
                        <div class="error-message" id="contactError"></div>
					</div>

					<div class="form-group">
						<label for="message">Message *</label>
						<textarea id="message" name="message" required placeholder="Your message"></textarea>
					</div>

					<div class="form-group">
                        <label for="name">Are you human?</label>
                        <div class="captcha-container">
                            <div class="cf-turnstile" data-sitekey="0x4AAAAAAB69zO3J9FFp4gVd"></div>
                        </div>
                    </div>

                    <button type="submit" id="submitBtn">
						Send Message
					</button>
				</form>
				<div id="statusMessage" class="message"></div>
            </div>
        </div>
    </section>

    <footer class="odd-section">
        <div class="footer-content">
            <p><strong>inCharge Ltd</strong></p>
            <p>Remote coaching via Zoom | UK-based clients</p>
            <p>Sessions: Â£80 per hour</p>
        </div>
    </footer>

    <script>
        const form = document.getElementById('contactForm');
        const submitBtn = document.getElementById('submitBtn');
        const statusMessage = document.getElementById('statusMessage');
        const contactInput = document.getElementById('contact');
        const contactError = document.getElementById('contactError');
        let typingTimer;
        const typingDelay = 800;

        function isValidEmail(email) {
            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            return emailRegex.test(email);
        }

        function isValidPhone(phone) {
            // Remove all non-digit characters except +
            const cleaned = phone.replace(/[^\d+]/g, '');
            // Must start with optional + and have 7-15 digits
            const phoneRegex = /^\+?\d{7,15}$/;
            return phoneRegex.test(cleaned);
        }

        function validateContact() {
            const value = contactInput.value.trim();
            contactError.classList.remove('show');
            if (value === '') {
                return;
            }

            if (isValidEmail(value)) {
                contactInput.classList.add('valid');
            } else if (isValidPhone(value)) {
                contactInput.classList.add('valid');
            } else {
                contactInput.classList.add('invalid');
                contactError.textContent = 'Please enter a valid email address or phone number';
                contactError.classList.add('show');
            }
        }

        contactInput.addEventListener('input', () => {
            clearTimeout(typingTimer);
            typingTimer = setTimeout(validateContact, typingDelay);
        });

        contactInput.addEventListener('blur', () => {
            clearTimeout(typingTimer);
            validateContact();
        });

        form.addEventListener('submit', async (e) => {
            e.preventDefault();

            let turnstileResponse = "0";
            try {
                turnstileResponse = turnstile.getResponse();
                if (!turnstileResponse) {
                    showMessage('Please complete the CAPTCHA verification.', 'error');
                    return;
                }
            } catch (error) {
                showMessage(`CAPTCHA error: ${error.message}`, 'error');
                return;
            }

            validateContact();            
            if (!contactInput.classList.contains('valid')) {
                alert('Please enter a valid email address or phone number before submitting');
                return;
            }

            const formData = {
                name: document.getElementById('name').value,
                replyto: document.getElementById('contact').value,
                message: document.getElementById('message').value,
                turnstileToken: turnstileResponse
            };

            submitBtn.disabled = true;
            submitBtn.innerHTML = '<span class="spinner"></span>Sending...';

            let status = 0;
            try {
                const response = await fetch('/api/contact', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(formData)
                });
                status = response.status;

                if (response.ok) {
                    showMessage('Message sent successfully! I\'ll get back to you as soon as possible.', 'success');
                    form.reset();
                } else {
                    const result = await response.json();
                    showMessage(result.error || 'Failed to send message. Please try again.', 'error');
                }
            } catch (error) {
                if (status==429)
                    showMessage('The form was submitted more than once.  Please wait 10 seconds and try again', 'error');
                else
                    showMessage(`Network error (${status}). Please check your connection and try again.`, 'error');
            } finally {
                turnstile.reset();
                submitBtn.disabled = false;
                submitBtn.innerHTML = 'Send Message';
            }
        });

        function showMessage(text, type) {
            statusMessage.textContent = text;
            statusMessage.className = `message ${type} show`;
            setTimeout(() => {
                statusMessage.classList.remove('show');
            }, 5000);
        }
    </script>
</body>
</html>
